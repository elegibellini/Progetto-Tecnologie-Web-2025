{% extends 'accounts/main.html' %}
{% load static %}
{% block content %}

<div class="container mt-5">
    <h2>Area Riservata ai Lavoratori</h2>
    <hr>

   
    <h4> Prenotazioni dei prossimi giorni</h4>
    <ul class="list-group mb-4">
        {% for p in prenotazioni_future %}
            <li class="list-group-item">
                {{ p.data|date:"d/m/Y" }} alle {{ p.ora|time:"H:i" }} ‚Äì {{ p.numero_persone }} persone ‚Äì {{ p.utente.username }}
            </li>
        {% empty %}
            <li class="list-group-item">Nessuna prenotazione trovata.</li>
        {% endfor %}
    </ul>

   
    <h4>Seleziona giorni non prenotabili</h4>

    
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-danger">Aggiungi giorno non prenotabile</button>
    </form>

    <ul class="list-group mt-3">
        {% for g in giorni_bloccati %}
            <li class="list-group-item">{{ g.data|date:"d/m/Y" }}</li>
        {% empty %}
            <li class="list-group-item">Nessun giorno bloccato.</li>
        {% endfor %}
    </ul>

   
    <hr>
    <button class="btn btn-secondary mt-3" onclick="toggleStorico()">üìÅ Visualizza prenotazioni passate</button>

    <div id="storicoPrenotazioni" style="display: none;" class="mt-3">
        <h4>üìÅ Prenotazioni passate</h4>
        <ul class="list-group">
            {% for p in prenotazioni_passate %}
                <li class="list-group-item">
                    {{ p.data|date:"d/m/Y" }} alle {{ p.ora|time:"H:i" }} ‚Äì {{ p.numero_persone }} persone ‚Äì {{ p.utente.username }}
                </li>
            {% empty %}
                <li class="list-group-item">Nessuna prenotazione passata trovata.</li>
            {% endfor %}
        </ul>
    </div>
</div>

<script>
    function toggleStorico() {
        const div = document.getElementById("storicoPrenotazioni");
        div.style.display = div.style.display === "none" ? "block" : "none";
    }
</script>

{% endblock %}
